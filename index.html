<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />

<title>ZTERA ‚Äì TeraBox Video Player & Downloader (HD Online Player)</title>

<link rel="icon" type="image/png" href="YOUR-ICON.png">
<link rel="manifest" href="manifest.json" />
<meta name="theme-color" content="#3248f5" />

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E6G38YDKRW"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-E6G38YDKRW');
</script>

<style>
:root{--bg1:#eef3ff;--bg2:#f8fbff}
body{
  margin:0;font-family:Inter,system-ui;
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
}
.wrap{max-width:980px;margin:30px auto;padding:16px}
.hero{text-align:center}
h1{font-size:40px;color:#3248f5;font-weight:800}
p.lead{color:#6f7280;font-size:17px}
.card{
  background:#fff;padding:22px;border-radius:20px;
  box-shadow:0 12px 26px rgba(0,0,0,.08)
}
.row input{
  width:100%;padding:14px;font-size:16px;
  border-radius:14px;border:1px solid #d7d9ef
}
.btn{
  padding:14px 26px;border-radius:16px;
  background:linear-gradient(135deg,#6d28d9,#4f46e5);
  color:#fff;font-size:18px;font-weight:700;
  cursor:pointer;border:0
}
.btn:disabled{opacity:.7;cursor:not-allowed}
.neonNote{
  margin-top:14px;padding:10px;
  color:#ff4d4d;font-weight:600;
  background:rgba(255,0,0,.12);
  border-radius:14px;text-align:center
}
#status{
  margin-top:12px;
  text-align:center;
  font-weight:700;
  color:#3248f5;
  display:none
}
#videoSection{
  display:none;
  margin-top:35px
}
iframe{
  width:100%;
  height:100%;
  border:none;
  border-radius:10px
}
</style>
</head>

<body>

<div class="wrap">

<header class="hero">
<h1>ZTERA ‚Äì TeraBox HD Video Player</h1>
<p class="lead">Play Terabox Videos Online ‚Äì Fast & Secure</p>
</header>

<section class="card">
<div class="row">
<input id="tbxUrl" type="url" placeholder="Enter TeraBox link here‚Ä¶">
</div>

<div style="text-align:center;margin-top:18px;">
<button id="openVideo" class="btn">‚ñ∂ Play Video</button>
</div>

<div id="status">‚è≥ Fetching video‚Ä¶</div>

<p class="neonNote">
‚ö† Turn on Auto-Rotate for full-screen video
</p>
</section>

<section id="videoSection">
<div style="max-width:1200px;margin:auto;aspect-ratio:16/9">
<iframe id="videoFrame" allowfullscreen></iframe>
</div>
</section>

</div>

<!-- ===============================
     AUTO RETRY + PLAYER LOGIC
     =============================== -->
<script>
let retryTimer = null;
let isPlaying = false;
let retryCount = 0;

const playBtn = document.getElementById("openVideo");
const statusBox = document.getElementById("status");

/* üîÅ INFINITE AUTO-RETRY */
async function tryPlay(url){
  if(isPlaying) return;

  playBtn.disabled = true;
  statusBox.style.display = "block";
  retryCount++;

  statusBox.innerText =
    retryCount === 1
    ? "‚è≥ Fetching video‚Ä¶"
    : "‚è≥ Server busy‚Ä¶ retrying ("+retryCount+")";

  try{
    const controller = new AbortController();
    setTimeout(()=>controller.abort(), 8000);

    /* lightweight ping */
    await fetch("https://iteraplay.com/api/ping",{signal:controller.signal});

    /* üé• PLAYER CODE ‚Äî UNCHANGED */
    videoFrame.src =
      "https://iteraplay.com/api/play.php?url=" +
      encodeURIComponent(url) +
      "&key=iTeraPlay2025";

    videoSection.style.display = "block";
    setTimeout(()=>videoSection.scrollIntoView({behavior:"smooth"}),500);

    isPlaying = true;
    playBtn.innerText = "‚ñ∂ Playing";
    statusBox.style.display = "none";

  }catch(e){
    retryTimer = setTimeout(()=>{
      tryPlay(url);
    },2500);
  }
}

/* ‚ñ∂ PLAY BUTTON */
playBtn.onclick = () => {
  let url = tbxUrl.value.trim();
  if(url.length < 10) return alert("Enter valid Terabox link");
  if(!url.startsWith("http")) url = "https://" + url;

  isPlaying = false;
  retryCount = 0;
  playBtn.innerText = "‚è≥ Loading‚Ä¶";

  tryPlay(url);
};
</script>

<!-- ===============================
     TELEGRAM BOT AUTO PLAY
     =============================== -->
<script>
(function () {
  const params = new URLSearchParams(window.location.search);
  const botUrl = params.get("url");

  if (botUrl && botUrl.length > 10) {
    tbxUrl.value = decodeURIComponent(botUrl);
    setTimeout(()=>openVideo.click(),1200);
  }
})();
</script>

</body>
</html>
